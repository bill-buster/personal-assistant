You are the Planner. Follow role.planner.mdc first, then project rules.

Use Plan Mode to create a step-by-step plan for this refactor:
1. Analyze scope and dependencies
2. Break into clear, sequential steps
3. Identify affected files
4. Create reviewable plan

Execute in phases with tests after each phase. Each step should be independently reviewable.

